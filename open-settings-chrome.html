<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>IHU Intent & chrome:// Test</title>
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:18px;max-width:820px}
  h1{font-size:20px;margin-bottom:6px}
  p.lead{color:#444;margin-top:0}
  .grid{display:grid;grid-template-columns:1fr;gap:10px}
  .btn{display:block;padding:12px 14px;border-radius:8px;border:1px solid #333;text-decoration:none;color:#000;background:#fff}
  .small{font-size:13px;color:#555}
  pre#log{background:#111;color:#0f0;padding:10px;border-radius:6px;white-space:pre-wrap;overflow:auto;height:140px}
  footer{margin-top:12px;color:#666;font-size:13px}
</style>
</head>
<body>
  <h1>IHU: Intent + chrome:// Test Page</h1>
  <p class="lead small">Tap each button. If nothing happens, note the exact message (blank, "ERR_UNKNOWN_URL_SCHEME", "net::ERR...", "No app found", or no reaction). Results appear in the log box below.</p>

  <section>
    <h2 class="small">Chrome internal attempts</h2>
    <div class="grid">
      <a class="btn" href="chrome://settings" id="linkChrome">Open chrome://settings (link)</a>
      <button class="btn" id="jsChrome">Open chrome://settings (window.location)</button>
      <button class="btn" id="iframeChrome">Open chrome://settings (iframe.src)</button>
      <a class="btn" href="chrome://version" id="linkChrome2">Open chrome://version</a>
    </div>
  </section>

  <hr>

  <section>
    <h2 class="small">Android intent:// variants (general and app-targeted)</h2>
    <div class="grid">
      <a class="btn" href="intent://#Intent;action=android.settings.SETTINGS;end" id="i1">intent://#Intent;action=android.settings.SETTINGS;end</a>

      <a class="btn" href="intent://settings#Intent;action=android.settings.SETTINGS;end" id="i2">intent://settings#Intent;action=android.settings.SETTINGS;end</a>

      <a class="btn" href="intent:#Intent;action=android.settings.SETTINGS;end" id="i3">intent:#Intent;action=android.settings.SETTINGS;end</a>

      <a class="btn" href="intent://package/com.google.android.youtube#Intent;action=android.settings.APPLICATION_DETAILS_SETTINGS;end" id="i4">YouTube App Info (variant A)</a>

      <a class="btn" href="intent://#Intent;action=android.settings.APPLICATION_DETAILS_SETTINGS;scheme=package;S.android.package=com.google.android.youtube;end" id="i5">YouTube App Info (variant B)</a>

      <a class="btn" href="intent://package/com.google.android.youtube#Intent;action=android.settings.MANAGE_UNKNOWN_APP_SOURCES;end" id="i6">Allow installs (YouTube) variant</a>

      <a class="btn" href="intent://package/com.google.android.youtube#Intent;end" id="i7">Package-only variant</a>
    </div>
  </section>

  <hr>

  <section>
    <h2 class="small">JS navigation & iframe fallbacks</h2>
    <div class="grid">
      <button class="btn" id="jsIntent">JS nav to intent://#Intent;action=android.settings.SETTINGS;end</button>
      <button class="btn" id="iframeIntent">iframe nav to intent://#Intent;action=android.settings.SETTINGS;end</button>
      <button class="btn" id="openDownload">Try to download a tiny test file (for download flow)</button>
    </div>
  </section>

  <hr>

  <h2 class="small">Result log (copy any errors here)</h2>
  <pre id="log">Ready. Tap a button and the page will record simple events here.</pre>

  <footer>
    <div class="small">Notes: (1) These links only request the target UI — they cannot perform actions without user input. (2) If you get <strong>ERR_UNKNOWN_URL_SCHEME</strong>, the IHU WebView blocks that scheme. (3) If the page goes blank or shows an error text, copy it into the log and paste here when reporting results.</div>
  </footer>

<script>
function log(msg){
  var el=document.getElementById('log');
  var now=new Date().toISOString().replace('T',' ').split('.')[0];
  el.textContent = now + " — " + msg + "\n\n" + el.textContent;
}

// intercept link clicks to log and allow default behavior
document.querySelectorAll('a.btn').forEach(function(a){
  a.addEventListener('click', function(ev){
    log('Clicked link href='+a.getAttribute('href'));
    // allow navigation to proceed
    setTimeout(function(){
      // if nothing happened after 1s, help user
      log('If nothing happened within ~1s, the WebView likely blocked the scheme or the attempt.');
    }, 1000);
  });
});

// chrome:// JS nav
document.getElementById('jsChrome').addEventListener('click', function(){
  log('Attempting window.location -> chrome://settings');
  try{
    window.location.href = 'chrome://settings';
  } catch(e){
    log('JS exception: '+e);
    alert('JS exception: '+e);
  }
  setTimeout(function(){ log('If nothing changed, chrome:// is blocked by the WebView.'); }, 800);
});

// chrome:// iframe
document.getElementById('iframeChrome').addEventListener('click', function(){
  log('Attempting iframe.src -> chrome://settings');
  try{
    var f=document.getElementById('cif');
    if(!f){ f=document.createElement('iframe'); f.id='cif'; f.style.display='none'; document.body.appendChild(f); }
    f.src = 'chrome://settings';
  } catch(e){
    log('iframe set failed: '+e);
  }
  setTimeout(function(){ log('If nothing changed, chrome:// likely blocked.'); }, 800);
});

// JS nav to intent
document.getElementById('jsIntent').addEventListener('click', function(){
  log('Attempting window.location -> intent://#Intent;action=android.settings.SETTINGS;end');
  try{ window.location = "intent://#Intent;action=android.settings.SETTINGS;end"; } catch(e){ log('JS exception: '+e); }
  setTimeout(function(){ log('If nothing happened, intent scheme is blocked or unsupported.'); }, 900);
});

// iframe to intent
document.getElementById('iframeIntent').addEventListener('click', function(){
  log('Attempting iframe.src -> intent://#Intent;action=android.settings.SETTINGS;end');
  try{
    var f=document.getElementById('iif');
    if(!f){ f=document.createElement('iframe'); f.id='iif'; f.style.display='none'; document.body.appendChild(f); }
    f.src = 'intent://#Intent;action=android.settings.SETTINGS;end';
  } catch(e){ log('iframe exception: '+e); }
  setTimeout(function(){ log('If nothing happened, intent scheme is blocked.'); }, 900);
});

// download test (tiny text file) — helps verify downloads are surfaced by WebView
document.getElementById('openDownload').addEventListener('click', function(){
  log('Triggering a test download (tiny file).');
  // create a small blob and download
  var blob = new Blob(['Test file for IHU download flow\\n'], {type:'text/plain'});
  var url = URL.createObjectURL(blob);
  var a = document.createElement('a');
  a.href = url;
  a.download = 'ihu-test.txt';
  document.body.appendChild(a);
  a.click();
  a.remove();
  setTimeout(function(){ log('Download triggered; check IHU UI/notifications for file or an "Open" option.'); }, 700);
});
</script>
</body>
</html>
